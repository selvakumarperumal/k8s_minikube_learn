# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘        KUBERNETES LABELS AND SELECTORS - COMPLETE GUIDE                   â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# This file demonstrates:
# 1. What are labels and selectors
# 2. How they work with different components
# 3. Practical examples with Pods, Deployments, Services, StatefulSets
# 4. Label matching rules and best practices
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚                          TABLE OF CONTENTS                                  â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚  1. What are Labels?                                                        â”‚
# â”‚  2. What are Selectors?                                                     â”‚
# â”‚  3. Labels and Selectors Architecture                                       â”‚
# â”‚  4. How They Work Together                                                  â”‚
# â”‚  5. COMPONENT-TO-COMPONENT INTERACTIONS (IMPORTANT!)                        â”‚
# â”‚     â”œâ”€ Service + Pod                                                        â”‚
# â”‚     â”œâ”€ Service + Deployment                                                 â”‚
# â”‚     â”œâ”€ Service + StatefulSet                                                â”‚
# â”‚     â”œâ”€ Deployment + ReplicaSet + Pod                                        â”‚
# â”‚     â””â”€ Complete Multi-Component Example                                     â”‚
# â”‚  6. Labels in Pods                                                          â”‚
# â”‚  7. Selectors in Services                                                   â”‚
# â”‚  8. Labels and Selectors in Deployments                                     â”‚
# â”‚  9. Labels and Selectors in StatefulSets                                    â”‚
# â”‚  10. Advanced Selector Types                                                â”‚
# â”‚  11. Label Best Practices                                                   â”‚
# â”‚  12. Practical Examples                                                     â”‚
# â”‚  13. Testing and Debugging                                                  â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                        1. WHAT ARE LABELS?                                â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   ğŸ¯ SIMPLE DEFINITION:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Labels are KEY-VALUE PAIRS attached to Kubernetes objects (pods, services, etc.)
#   They are used to organize, identify, and select objects.
#
#   Think of labels as TAGS or STICKERS you put on objects to categorize them.
#
#
#   LABEL FORMAT:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   key: value
#
#   Examples:
#   â”œâ”€ app: nginx
#   â”œâ”€ environment: production
#   â”œâ”€ tier: frontend
#   â”œâ”€ version: v1.2.3
#   â””â”€ team: platform
#
#
#   LABEL RULES:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Keys:
#   â”œâ”€ Must be 63 characters or less
#   â”œâ”€ Can contain: letters, numbers, hyphens, dots, underscores
#   â”œâ”€ Must start and end with alphanumeric character
#   â””â”€ Can have optional prefix (example.com/key)
#
#   Values:
#   â”œâ”€ Must be 63 characters or less
#   â”œâ”€ Can contain: letters, numbers, hyphens, dots, underscores
#   â”œâ”€ Can be empty string
#   â””â”€ Must start and end with alphanumeric character (if not empty)
#
#
#   WHY USE LABELS?
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   âœ“ Organize resources (group related objects)
#   âœ“ Select resources (find specific objects)
#   âœ“ Route traffic (services find pods)
#   âœ“ Manage resources (deployments manage pods)
#   âœ“ Query resources (kubectl get pods -l app=nginx)
#
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                      2. WHAT ARE SELECTORS?                               â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   ğŸ¯ SIMPLE DEFINITION:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Selectors are QUERIES that find objects with matching labels.
#   They are used by controllers and services to find the objects they manage.
#
#   Think of selectors as SEARCH FILTERS that find objects by their labels.
#
#
#   SELECTOR TYPES:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   1. Equality-based selectors (simple matching)
#      â”œâ”€ app = nginx        (matches app: nginx)
#      â”œâ”€ app == nginx       (same as above)
#      â”œâ”€ app != apache      (matches anything except app: apache)
#      â””â”€ environment = prod (matches environment: prod)
#
#   2. Set-based selectors (advanced matching)
#      â”œâ”€ app in (nginx, apache)       (matches app: nginx OR app: apache)
#      â”œâ”€ tier notin (backend)         (matches anything except tier: backend)
#      â”œâ”€ environment                  (matches any object with environment label)
#      â””â”€ !version                     (matches objects without version label)
#
#
#   WHERE SELECTORS ARE USED:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   âœ“ Services â†’ Find pods to route traffic to
#   âœ“ Deployments â†’ Find pods to manage
#   âœ“ StatefulSets â†’ Find pods to manage
#   âœ“ ReplicaSets â†’ Find pods to manage
#   âœ“ kubectl commands â†’ Find resources to display/modify
#
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                3. LABELS AND SELECTORS ARCHITECTURE                       â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   HOW THEY WORK TOGETHER:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
#   â”‚                      KUBERNETES CLUSTER                             â”‚
#   â”‚                                                                     â”‚
#   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
#   â”‚  â”‚  Service: frontend-service                                    â”‚  â”‚
#   â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚  â”‚
#   â”‚  â”‚  selector:                                                    â”‚  â”‚
#   â”‚  â”‚    app: nginx  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚  â”‚
#   â”‚  â”‚    tier: frontend                 â”‚ Searches for pods         â”‚  â”‚
#   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
#   â”‚                                      â”‚ with matching labels      â”‚  â”‚
#   â”‚                                      â”‚                           â”‚  â”‚
#   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
#   â”‚  â”‚  Deployment: nginx-deployment     â”‚                           â”‚  â”‚
#   â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚                           â”‚  â”‚
#   â”‚  â”‚  selector:                        â”‚                           â”‚  â”‚
#   â”‚  â”‚    matchLabels:                   â”‚                           â”‚  â”‚
#   â”‚  â”‚      app: nginx  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
#   â”‚  â”‚      tier: frontend               â”‚           â”‚               â”‚  â”‚
#   â”‚  â”‚                                   â”‚           â”‚               â”‚  â”‚
#   â”‚  â”‚  template:                        â”‚           â”‚               â”‚  â”‚
#   â”‚  â”‚    metadata:                      â”‚           â”‚               â”‚  â”‚
#   â”‚  â”‚      labels:                      â”‚           â”‚               â”‚  â”‚
#   â”‚  â”‚        app: nginx  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚               â”‚  â”‚
#   â”‚  â”‚        tier: frontend                         â”‚               â”‚  â”‚
#   â”‚  â”‚        version: v1                            â”‚               â”‚  â”‚
#   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
#   â”‚                                                  â”‚                   â”‚
#   â”‚                                                  â”‚ Creates pods      â”‚
#   â”‚                                                  â”‚ with these labels â”‚
#   â”‚                                                  â–¼                   â”‚
#   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
#   â”‚  â”‚  PODS                                                           â”‚ â”‚
#   â”‚  â”‚  â”€â”€â”€â”€                                                           â”‚ â”‚
#   â”‚  â”‚                                                                 â”‚ â”‚
#   â”‚  â”‚  Pod: nginx-deployment-abc123                                   â”‚ â”‚
#   â”‚  â”‚  labels:                                                        â”‚ â”‚
#   â”‚  â”‚    app: nginx         â—„â”€â”€â”€ Matches Service selector âœ“           â”‚ â”‚
#   â”‚  â”‚    tier: frontend     â—„â”€â”€â”€ Matches Service selector âœ“           â”‚ â”‚
#   â”‚  â”‚    version: v1        â—„â”€â”€â”€ Extra label (OK!)                    â”‚ â”‚
#   â”‚  â”‚                                                                 â”‚ â”‚
#   â”‚  â”‚  Pod: nginx-deployment-def456                                   â”‚ â”‚
#   â”‚  â”‚  labels:                                                        â”‚ â”‚
#   â”‚  â”‚    app: nginx         â—„â”€â”€â”€ Matches Service selector âœ“           â”‚ â”‚
#   â”‚  â”‚    tier: frontend     â—„â”€â”€â”€ Matches Service selector âœ“           â”‚ â”‚
#   â”‚  â”‚    version: v1        â—„â”€â”€â”€ Extra label (OK!)                    â”‚ â”‚
#   â”‚  â”‚                                                                 â”‚ â”‚
#   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
#   â”‚                                                                      â”‚
#   â”‚  RESULT: Service routes traffic to both pods                         â”‚
#   â”‚          Deployment manages both pods                                â”‚
#   â”‚                                                                      â”‚
#   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”˜
#
#
#   KEY CONCEPT:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   â€¢ Controllers (Deployment, StatefulSet) use selectors to find pods they manage
#   â€¢ Services use selectors to find pods they route traffic to
#   â€¢ Pods have labels that match these selectors
#   â€¢ If labels match selector â†’ Object is selected
#   â€¢ If labels don't match â†’ Object is ignored
#
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                    4. HOW THEY WORK TOGETHER                              â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   MATCHING PROCESS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   Step 1: Object has labels
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Pod:
#     labels:
#       app: nginx
#       tier: frontend
#       version: v1
#
#   Step 2: Selector defines criteria
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Service:
#     selector:
#       app: nginx
#       tier: frontend
#
#   Step 3: Kubernetes compares
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Selector requires:     Pod has:
#   app: nginx        âœ“    app: nginx        âœ“ Match!
#   tier: frontend    âœ“    tier: frontend    âœ“ Match!
#                          version: v1       (extra, ignored)
#
#   Result: âœ“ MATCH! Pod is selected
#
#
#   MATCHING RULES:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   âœ“ ALL selector labels MUST exist in pod labels
#   âœ“ ALL selector label values MUST match pod label values
#   âœ“ Pod can have EXTRA labels (they are ignored)
#   âœ— If ANY selector label is missing â†’ NO MATCH
#   âœ— If ANY selector label value differs â†’ NO MATCH
#
#
#   EXAMPLES:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   Selector: { app: nginx }
#   Pod labels: { app: nginx, tier: frontend }
#   Result: âœ“ MATCH (pod has all required labels)
#
#   Selector: { app: nginx, tier: frontend }
#   Pod labels: { app: nginx }
#   Result: âœ— NO MATCH (pod missing tier label)
#
#   Selector: { app: nginx }
#   Pod labels: { app: apache }
#   Result: âœ— NO MATCH (different value)
#
#   Selector: { app: nginx }
#   Pod labels: { }
#   Result: âœ— NO MATCH (no labels)
#
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                        5. LABELS IN PODS                                  â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   Pods can have labels in their metadata section.
#   These labels are used by Services, Deployments, and other controllers.
#

---
# Example 1: Simple Pod with Labels
apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod

  # Labels section - key-value pairs
  labels:
    app: nginx # Application name
    environment: production # Environment
    tier: frontend # Application tier
    version: "1.21" # Version (quoted because it starts with number)
    team: platform # Team responsible

  # Annotations (different from labels - not used for selection)
  annotations:
    description: "Main nginx web server"
    contact: "platform-team@example.com"

spec:
  containers:
    - name: nginx
      image: nginx:1.21
      ports:
        - containerPort: 80

      # Resource requests and limits to prevent noisy neighbor issues
      # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      resources:
        # Requests: Minimum guaranteed resources
        requests:
          cpu: 100m # 0.1 CPU cores (100 millicores)
          memory: 128Mi # 128 Mebibytes of RAM

        # Limits: Maximum resources the container can use
        limits:
          cpu: 500m # 0.5 CPU cores maximum
          memory: 256Mi # 256 Mebibytes maximum
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  EXAMPLE 1 EXPLAINED: POD WITH LABELS                                   â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚                                                                         â”‚
# â”‚  Pod Structure:                                                         â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  Pod: nginx-pod                                                  â”‚   â”‚
# â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  metadata:                                                       â”‚   â”‚
# â”‚  â”‚    labels:  â—„â”€â”€â”€ Used for SELECTION                              â”‚   â”‚
# â”‚  â”‚      app: nginx                                                  â”‚   â”‚
# â”‚  â”‚      environment: production                                     â”‚   â”‚
# â”‚  â”‚      tier: frontend                                              â”‚   â”‚
# â”‚  â”‚      version: "1.21"                                             â”‚   â”‚
# â”‚  â”‚      team: platform                                              â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚    annotations:  â—„â”€â”€â”€ Used for METADATA (not selection)          â”‚   â”‚
# â”‚  â”‚      description: "Main nginx web server"                        â”‚   â”‚
# â”‚  â”‚      contact: "platform-team@example.com"                        â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  spec:                                                           â”‚   â”‚
# â”‚  â”‚    containers:                                                   â”‚   â”‚
# â”‚  â”‚      - name: nginx                                               â”‚   â”‚
# â”‚  â”‚        image: nginx:1.21                                         â”‚   â”‚
# â”‚  â”‚        ports:                                                    â”‚   â”‚
# â”‚  â”‚          - containerPort: 80                                     â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  Labels vs Annotations:                                                 â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
# â”‚  LABELS:                                                                â”‚
# â”‚  â”œâ”€ Used for selecting/querying resources                               â”‚
# â”‚  â”œâ”€ Used by Services, Deployments, etc.                                 â”‚
# â”‚  â”œâ”€ Limited to 63 characters                                            â”‚
# â”‚  â””â”€ Example: app: nginx                                                 â”‚
# â”‚                                                                         â”‚
# â”‚  ANNOTATIONS:                                                           â”‚
# â”‚  â”œâ”€ Used for non-identifying metadata                                   â”‚
# â”‚  â”œâ”€ NOT used for selection                                              â”‚
# â”‚  â”œâ”€ No size limit                                                       â”‚
# â”‚  â””â”€ Example: description: "Main nginx web server"                       â”‚
# â”‚                                                                         â”‚
# â”‚  How Services Can Select This Pod:                                      â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
# â”‚  Service selector: { app: nginx }                                       â”‚
# â”‚  â””â”€ Matches! âœ“                                                          â”‚
# â”‚                                                                         â”‚
# â”‚  Service selector: { app: nginx, tier: frontend }                       â”‚
# â”‚  â””â”€ Matches! âœ“                                                          â”‚
# â”‚                                                                         â”‚
# â”‚  Service selector: { app: nginx, environment: production, tier: frontend }â”‚
# â”‚  â””â”€ Matches! âœ“                                                          â”‚
# â”‚                                                                         â”‚
# â”‚  Service selector: { app: apache }                                      â”‚
# â”‚  â””â”€ No match âœ— (different app value)                                   â”‚
# â”‚                                                                         â”‚
# â”‚  kubectl Commands:                                                      â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
# â”‚  # View this pod's labels                                               â”‚
# â”‚  kubectl get pod nginx-pod --show-labels                                â”‚
# â”‚  NAME        READY   STATUS    LABELS                                   â”‚
# â”‚  nginx-pod  1/1     Running   app=nginx,environment=production,...      â”‚
# â”‚                                                                         â”‚
# â”‚  # Find this pod by label                                               â”‚
# â”‚  kubectl get pods -l app=nginx                                          â”‚
# â”‚  kubectl get pods -l environment=production                             â”‚
# â”‚  kubectl get pods -l tier=frontend                                      â”‚
# â”‚                                                                         â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---
# Example 2: Pod with Minimal Labels
apiVersion: v1
kind: Pod
metadata:
  name: simple-pod
  labels:
    app: myapp # Minimum recommended: app name

spec:
  containers:
    - name: myapp
      image: busybox
      command: ["sleep", "3600"]
      resources:
        requests:
          cpu: 50m
          memory: 64Mi
        limits:
          cpu: 200m
          memory: 128Mi
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  EXAMPLE 2 EXPLAINED: MINIMAL LABELS (BEST PRACTICE)                   â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚                                                                         â”‚
# â”‚  Pod: simple-pod                                                        â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  metadata:                                                       â”‚   â”‚
# â”‚  â”‚    labels:                                                       â”‚   â”‚
# â”‚  â”‚      app: myapp  â—„â”€â”€â”€ MINIMUM recommended label                 â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  Why Minimal Labels?                                                    â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
# â”‚  âœ“ Simple applications don't need complex labeling                      â”‚
# â”‚  âœ“ At minimum, always include 'app' label                               â”‚
# â”‚  âœ“ Easy to query: kubectl get pods -l app=myapp                         â”‚
# â”‚  âœ“ Services can select: selector: { app: myapp }                        â”‚
# â”‚                                                                         â”‚
# â”‚  When to Use:                                                           â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
# â”‚  â€¢ Development/testing environments                                     â”‚
# â”‚  â€¢ Simple single-purpose applications                                   â”‚
# â”‚  â€¢ Proof of concepts                                                    â”‚
# â”‚  â€¢ Learning Kubernetes                                                  â”‚
# â”‚                                                                         â”‚
# â”‚  When to Add More Labels:                                               â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
# â”‚  â€¢ Multiple environments (add: environment: prod/staging/dev)           â”‚
# â”‚  â€¢ Multiple tiers (add: tier: frontend/backend/database)                â”‚
# â”‚  â€¢ Team ownership (add: team: platform-team)                            â”‚
# â”‚  â€¢ Version tracking (add: version: "1.0.0")                             â”‚
# â”‚                                                                         â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---
# Example 3: Pod with Hierarchical Labels
apiVersion: v1
kind: Pod
metadata:
  name: backend-pod
  labels:
    # Recommended label structure
    app.kubernetes.io/name: backend # Application name
    app.kubernetes.io/instance: backend-prod # Unique instance
    app.kubernetes.io/version: "2.1.0" # Version
    app.kubernetes.io/component: api # Component
    app.kubernetes.io/part-of: ecommerce # Part of larger app
    app.kubernetes.io/managed-by: kubectl # Management tool

spec:
  containers:
    - name: backend
      image: backend:2.1.0
      ports:
        - containerPort: 8080
      resources:
        requests:
          cpu: 200m
          memory: 256Mi
        limits:
          cpu: 1000m
          memory: 512Mi
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  EXAMPLE 3 EXPLAINED: KUBERNETES RECOMMENDED LABELS                     â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚                                                                         â”‚
# â”‚  Pod: backend-pod                                                       â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  metadata:                                                       â”‚   â”‚
# â”‚  â”‚    labels:                                                       â”‚   â”‚
# â”‚  â”‚      app.kubernetes.io/name: backend                             â”‚   â”‚
# â”‚  â”‚      app.kubernetes.io/instance: backend-prod                    â”‚   â”‚
# â”‚  â”‚      app.kubernetes.io/version: "2.1.0"                          â”‚   â”‚
# â”‚  â”‚      app.kubernetes.io/component: api                            â”‚   â”‚
# â”‚  â”‚      app.kubernetes.io/part-of: ecommerce                        â”‚   â”‚
# â”‚  â”‚      app.kubernetes.io/managed-by: kubectl                       â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  Kubernetes Recommended Label Schema:                                   â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
# â”‚                                                                         â”‚
# â”‚  app.kubernetes.io/name: backend                                        â”‚
# â”‚  â””â”€ Application name (e.g., mysql, wordpress, backend)                  â”‚
# â”‚                                                                         â”‚
# â”‚  app.kubernetes.io/instance: backend-prod                               â”‚
# â”‚  â””â”€ Unique instance identifier (e.g., backend-prod, backend-staging)    â”‚
# â”‚                                                                         â”‚
# â”‚  app.kubernetes.io/version: "2.1.0"                                     â”‚
# â”‚  â””â”€ Application version (e.g., "2.1.0", "v1.0.0")                       â”‚
# â”‚                                                                         â”‚
# â”‚  app.kubernetes.io/component: api                                       â”‚
# â”‚  â””â”€ Component within architecture (e.g., api, database, cache)          â”‚
# â”‚                                                                         â”‚
# â”‚  app.kubernetes.io/part-of: ecommerce                                   â”‚
# â”‚  â””â”€ Name of higher-level application (e.g., ecommerce, platform)        â”‚
# â”‚                                                                         â”‚
# â”‚  app.kubernetes.io/managed-by: kubectl                                  â”‚
# â”‚  â””â”€ Tool managing the application (e.g., helm, kubectl, terraform)      â”‚
# â”‚                                                                         â”‚
# â”‚  Benefits of This Schema:                                               â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
# â”‚  âœ“ Standardized across Kubernetes ecosystem                             â”‚
# â”‚  âœ“ Compatible with Helm, Kustomize, and other tools                     â”‚
# â”‚  âœ“ Clear namespace (app.kubernetes.io/) prevents conflicts              â”‚
# â”‚  âœ“ Self-documenting (label names explain their purpose)                 â”‚
# â”‚  âœ“ Enables powerful queries and filtering                               â”‚
# â”‚                                                                         â”‚
# â”‚  Example Queries:                                                       â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
# â”‚  # Find all components of ecommerce app                                 â”‚
# â”‚  kubectl get all -l app.kubernetes.io/part-of=ecommerce                 â”‚
# â”‚                                                                         â”‚
# â”‚  # Find specific version                                                â”‚
# â”‚  kubectl get pods -l app.kubernetes.io/version=2.1.0                    â”‚
# â”‚                                                                         â”‚
# â”‚  # Find all API components                                              â”‚
# â”‚  kubectl get pods -l app.kubernetes.io/component=api                    â”‚
# â”‚                                                                         â”‚
# â”‚  # Find resources managed by specific tool                              â”‚
# â”‚  kubectl get all -l app.kubernetes.io/managed-by=helm                   â”‚
# â”‚                                                                         â”‚
# â”‚  Service Selection:                                                     â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
# â”‚  Service can select this pod using:                                     â”‚
# â”‚  selector:                                                              â”‚
# â”‚    app.kubernetes.io/name: backend                                      â”‚
# â”‚    app.kubernetes.io/component: api                                     â”‚
# â”‚                                                                         â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                    6. SELECTORS IN SERVICES                               â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   Services use selectors to find pods to route traffic to.
#   The selector is a simple key-value map (equality-based).
#

---
# Example 4: Service with Selector
apiVersion: v1
kind: Service
metadata:
  name: nginx-service

spec:
  # Selector: Finds pods with matching labels
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # This service will route traffic to ANY pod that has:
  # - app: nginx AND
  # - tier: frontend
  selector:
    app: nginx
    tier: frontend

  ports:
    - port: 80
      targetPort: 80

  type: ClusterIP

# This service will select:
# âœ“ nginx-pod (has app: nginx, tier: frontend, and other labels)
# âœ— simple-pod (doesn't have tier: frontend)
# âœ— backend-pod (has different app label)
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  HOW THIS SERVICE SELECTOR WORKS                                        â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚                                                                         â”‚
# â”‚  Service: nginx-service                                                 â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
# â”‚  â”‚ selector:                          â”‚                                 â”‚
# â”‚  â”‚   app: nginx  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                                 â”‚
# â”‚  â”‚   tier: frontend               â”‚   â”‚                                 â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”˜                                 â”‚
# â”‚                                   â”‚                                     â”‚
# â”‚                                   â”‚ Kubernetes searches ALL pods        â”‚
# â”‚                                   â”‚ in namespace for matching labels    â”‚
# â”‚                                   â–¼                                     â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  MATCHING PROCESS                                                â”‚   â”‚
# â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Pod: nginx-pod                                                  â”‚   â”‚
# â”‚  â”‚  Labels: { app: nginx, environment: production,                 â”‚   â”‚
# â”‚  â”‚            tier: frontend, version: "1.21", team: platform }     â”‚   â”‚
# â”‚  â”‚  â”œâ”€ app: nginx âœ“ (matches selector)                             â”‚   â”‚
# â”‚  â”‚  â”œâ”€ tier: frontend âœ“ (matches selector)                         â”‚   â”‚
# â”‚  â”‚  â””â”€ RESULT: âœ“ SELECTED! Traffic will be routed here             â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Pod: simple-pod                                                 â”‚   â”‚
# â”‚  â”‚  Labels: { app: myapp }                                          â”‚   â”‚
# â”‚  â”‚  â”œâ”€ app: myapp âœ— (doesn't match nginx)                          â”‚   â”‚
# â”‚  â”‚  â”œâ”€ tier: <missing> âœ— (selector requires this)                  â”‚   â”‚
# â”‚  â”‚  â””â”€ RESULT: âœ— NOT SELECTED! Traffic won't be routed here        â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Pod: backend-pod                                                â”‚   â”‚
# â”‚  â”‚  Labels: { app.kubernetes.io/name: backend, ... }               â”‚   â”‚
# â”‚  â”‚  â”œâ”€ app: <missing> âœ— (selector requires this)                   â”‚   â”‚
# â”‚  â”‚  â”œâ”€ tier: <missing> âœ— (selector requires this)                  â”‚   â”‚
# â”‚  â”‚  â””â”€ RESULT: âœ— NOT SELECTED! Traffic won't be routed here        â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  FINAL RESULT:                                                          â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
# â”‚  Service Endpoints: [ nginx-pod ]                                       â”‚
# â”‚                                                                         â”‚
# â”‚  Traffic Flow:                                                          â”‚
# â”‚  Client â†’ nginx-service:80 â†’ nginx-pod:80                               â”‚
# â”‚                                                                         â”‚
# â”‚  kubectl get endpoints nginx-service                                    â”‚
# â”‚  NAME             ENDPOINTS         AGE                                 â”‚
# â”‚  nginx-service   10.244.0.5:80     1m                                   â”‚
# â”‚                                                                         â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---
# Example 5: Service Selecting Single Label
apiVersion: v1
kind: Service
metadata:
  name: myapp-service

spec:
  # Selector with single label
  # Selects ALL pods with app: myapp
  selector:
    app: myapp

  ports:
    - port: 8080
      targetPort: 8080

# This service will select:
# âœ“ simple-pod (has app: myapp)
# âœ“ Any other pod with app: myapp label

---
# Example 6: Service with Multiple Selectors
apiVersion: v1
kind: Service
metadata:
  name: production-backend-service

spec:
  # Selector with multiple labels
  # ALL labels must match for pod to be selected
  selector:
    app: backend
    environment: production
    tier: api

  ports:
    - port: 8080
      targetPort: 8080

# This service will ONLY select pods that have ALL three labels:
# - app: backend
# - environment: production
# - tier: api

#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘              7. LABELS AND SELECTORS IN DEPLOYMENTS                       â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   Deployments use selectors to find pods they manage.
#   They also define labels in the pod template.
#
#   IMPORTANT: The selector MUST match the template labels!
#

---
# Example 7: Deployment with Labels and Selectors
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment

  # Labels for the Deployment itself (optional)
  labels:
    app: nginx
    managed-by: deployment-controller

spec:
  replicas: 3

  # Selector: Deployment uses this to find pods it manages
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # This MUST match the labels in template.metadata.labels
  selector:
    matchLabels:
      app: nginx
      tier: frontend

  # Template: Blueprint for creating pods
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  template:
    metadata:
      # Labels for pods created by this Deployment
      # These MUST include all labels from selector.matchLabels
      labels:
        app: nginx # Required by selector âœ“
        tier: frontend # Required by selector âœ“
        version: "1.21" # Extra label (OK!)
        managed-by: deployment # Extra label (OK!)

    spec:
      containers:
        - name: nginx
          image: nginx:1.21
          ports:
            - containerPort: 80
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
            limits:
              cpu: 500m
              memory: 256Mi

# FLOW:
# â”€â”€â”€â”€â”€
# 1. Deployment creates pods using template
# 2. Pods get labels: { app: nginx, tier: frontend, version: "1.21", managed-by: deployment }
# 3. Deployment selector finds pods with: { app: nginx, tier: frontend }
# 4. Deployment manages these pods (scaling, updates, etc.)
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  HOW THIS DEPLOYMENT WORKS                                              â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚                                                                         â”‚
# â”‚  Step 1: Deployment Created                                             â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  Deployment: nginx-deployment                                    â”‚   â”‚
# â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚   â”‚
# â”‚  â”‚  replicas: 3                                                     â”‚   â”‚
# â”‚  â”‚  selector:                                                       â”‚   â”‚
# â”‚  â”‚    matchLabels:                                                  â”‚   â”‚
# â”‚  â”‚      app: nginx  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
# â”‚  â”‚      tier: frontend â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚   â”‚
# â”‚  â”‚                                              â”‚                   â”‚   â”‚
# â”‚  â”‚  template:                                   â”‚                   â”‚   â”‚
# â”‚  â”‚    metadata:                                 â”‚                   â”‚   â”‚
# â”‚  â”‚      labels:                                 â”‚                   â”‚   â”‚
# â”‚  â”‚        app: nginx  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ MUST MATCH!       â”‚   â”‚
# â”‚  â”‚        tier: frontend  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ MUST MATCH!       â”‚   â”‚
# â”‚  â”‚        version: "1.21"  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  Extra (OK!)       â”‚   â”‚
# â”‚  â”‚        managed-by: deployment  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  Extra (OK!)       â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  Step 2: Deployment Creates ReplicaSet                                  â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  ReplicaSet: nginx-deployment-5d4c7b9f8d                         â”‚   â”‚
# â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚   â”‚
# â”‚  â”‚  (Automatically created by Deployment)                           â”‚   â”‚
# â”‚  â”‚  selector:                                                       â”‚   â”‚
# â”‚  â”‚    matchLabels:                                                  â”‚   â”‚
# â”‚  â”‚      app: nginx                                                  â”‚   â”‚
# â”‚  â”‚      tier: frontend                                              â”‚   â”‚
# â”‚  â”‚      pod-template-hash: 5d4c7b9f8d  â—„â”€ Auto-added by K8s!        â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  Step 3: ReplicaSet Creates Pods                                        â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  3 Pods Created                                                  â”‚   â”‚
# â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Pod 1: nginx-deployment-5d4c7b9f8d-abc123                       â”‚   â”‚
# â”‚  â”‚  â”œâ”€ app: nginx                                                   â”‚   â”‚
# â”‚  â”‚  â”œâ”€ tier: frontend                                               â”‚   â”‚
# â”‚  â”‚  â”œâ”€ version: "1.21"                                              â”‚   â”‚
# â”‚  â”‚  â”œâ”€ managed-by: deployment                                       â”‚   â”‚
# â”‚  â”‚  â””â”€ pod-template-hash: 5d4c7b9f8d                                â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Pod 2: nginx-deployment-5d4c7b9f8d-def456                       â”‚   â”‚
# â”‚  â”‚  â”œâ”€ app: nginx                                                   â”‚   â”‚
# â”‚  â”‚  â”œâ”€ tier: frontend                                               â”‚   â”‚
# â”‚  â”‚  â”œâ”€ version: "1.21"                                              â”‚   â”‚
# â”‚  â”‚  â”œâ”€ managed-by: deployment                                       â”‚   â”‚
# â”‚  â”‚  â””â”€ pod-template-hash: 5d4c7b9f8d                                â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Pod 3: nginx-deployment-5d4c7b9f8d-ghi789                       â”‚   â”‚
# â”‚  â”‚  â”œâ”€ app: nginx                                                   â”‚   â”‚
# â”‚  â”‚  â”œâ”€ tier: frontend                                               â”‚   â”‚
# â”‚  â”‚  â”œâ”€ version: "1.21"                                              â”‚   â”‚
# â”‚  â”‚  â”œâ”€ managed-by: deployment                                       â”‚   â”‚
# â”‚  â”‚  â””â”€ pod-template-hash: 5d4c7b9f8d                                â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  Step 4: Deployment Manages Pods                                        â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
# â”‚  Deployment selector: { app: nginx, tier: frontend }                    â”‚
# â”‚  Finds all 3 pods âœ“ (they all have these labels)                        â”‚
# â”‚                                                                         â”‚
# â”‚  Management Actions:                                                    â”‚
# â”‚  â”œâ”€ Scaling: kubectl scale deployment nginx-deployment --replicas=5     â”‚
# â”‚  â”‚  â””â”€ Creates 2 more pods with same labels                             â”‚
# â”‚  â”‚                                                                       â”‚
# â”‚  â”œâ”€ Updates: kubectl set image deployment/nginx-deployment nginx=1.22   â”‚
# â”‚  â”‚  â””â”€ Creates new ReplicaSet with new pod-template-hash                â”‚
# â”‚  â”‚                                                                       â”‚
# â”‚  â””â”€ Monitoring: Ensures desired replicas = actual replicas               â”‚
# â”‚                                                                         â”‚
# â”‚  kubectl get pods -l app=nginx,tier=frontend                            â”‚
# â”‚  NAME                                  READY   STATUS    RESTARTS   AGE  â”‚
# â”‚  nginx-deployment-5d4c7b9f8d-abc123    1/1     Running   0          5m   â”‚
# â”‚  nginx-deployment-5d4c7b9f8d-def456    1/1     Running   0          5m   â”‚
# â”‚  nginx-deployment-5d4c7b9f8d-ghi789    1/1     Running   0          5m   â”‚
# â”‚                                                                         â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---
# Example 8: Deployment with Advanced Selector
apiVersion: apps/v1
kind: Deployment
metadata:
  name: backend-deployment

spec:
  replicas: 2

  # Advanced selector using matchExpressions
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  selector:
    matchLabels:
      app: backend

    # Additional set-based requirements
    matchExpressions:
      - key: environment
        operator: In
        values:
          - production
          - staging

      - key: tier
        operator: NotIn
        values:
          - deprecated

  template:
    metadata:
      labels:
        app: backend
        environment: production
        tier: api

    spec:
      containers:
        - name: backend
          image: backend:latest
          ports:
            - containerPort: 8080
          resources:
            requests:
              cpu: 200m
              memory: 256Mi
            limits:
              cpu: 1000m
              memory: 512Mi

# This selector matches pods that have:
# - app: backend (exact match)
# - environment: production OR staging (set-based)
# - tier: anything except "deprecated" (set-based)

#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘             8. LABELS AND SELECTORS IN STATEFULSETS                       â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   StatefulSets work the same as Deployments for labels and selectors.
#   They also require a headless service with matching selector.
#

---
# Example 9: StatefulSet with Headless Service
apiVersion: v1
kind: Service
metadata:
  name: postgres-service
  labels:
    app: postgres

spec:
  clusterIP: None # Headless service

  # Selector: Finds pods to provide DNS for
  selector:
    app: postgres
    tier: database

  ports:
    - port: 5432
      name: postgres

---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: postgres
  labels:
    app: postgres

spec:
  serviceName: postgres-service # Must match headless service name
  replicas: 3

  # Selector: StatefulSet uses this to find pods it manages
  selector:
    matchLabels:
      app: postgres
      tier: database

  template:
    metadata:
      # Labels for pods created by this StatefulSet
      # MUST include all labels from selector.matchLabels
      labels:
        app: postgres # Required by selector âœ“
        tier: database # Required by selector âœ“
        version: "13" # Extra label (OK!)

    spec:
      containers:
        - name: postgres
          image: postgres:13
          ports:
            - containerPort: 5432
              name: postgres
          resources:
            requests:
              cpu: 250m
              memory: 512Mi
            limits:
              cpu: 1000m
              memory: 1Gi
          volumeMounts:
            - name: data
              mountPath: /var/lib/postgresql/data

  volumeClaimTemplates:
    - metadata:
        name: data
      spec:
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: 10Gi

# FLOW:
# â”€â”€â”€â”€â”€
# 1. StatefulSet creates pods: postgres-0, postgres-1, postgres-2
# 2. Pods get labels: { app: postgres, tier: database, version: "13" }
# 3. StatefulSet selector finds pods with: { app: postgres, tier: database }
# 4. Service selector finds same pods for DNS
# 5. Each pod gets DNS: postgres-0.postgres-service, postgres-1.postgres-service, etc.
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  HOW STATEFULSET + HEADLESS SERVICE WORKS                               â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚                                                                         â”‚
# â”‚  Step 1: Headless Service Created                                       â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  Service: postgres-service                                       â”‚   â”‚
# â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚   â”‚
# â”‚  â”‚  clusterIP: None  â—„â”€â”€â”€ HEADLESS! No load balancing               â”‚   â”‚
# â”‚  â”‚  selector:                                                       â”‚   â”‚
# â”‚  â”‚    app: postgres  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
# â”‚  â”‚    tier: database                            â”‚                   â”‚   â”‚
# â”‚  â”‚  ports:                                      â”‚                   â”‚   â”‚
# â”‚  â”‚    - port: 5432                              â”‚                   â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                 â”‚                       â”‚
# â”‚                                                 â”‚ Provides DNS for      â”‚
# â”‚                                                 â”‚ matching pods         â”‚
# â”‚                                                 â–¼                       â”‚
# â”‚  Step 2: StatefulSet Created                                            â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  StatefulSet: postgres                                           â”‚   â”‚
# â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚   â”‚
# â”‚  â”‚  serviceName: postgres-service  â—„â”€â”€â”€ Links to headless service  â”‚   â”‚
# â”‚  â”‚  replicas: 3                                                     â”‚   â”‚
# â”‚  â”‚  selector:                                                       â”‚   â”‚
# â”‚  â”‚    matchLabels:                                                  â”‚   â”‚
# â”‚  â”‚      app: postgres  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
# â”‚  â”‚      tier: database                          â”‚                   â”‚   â”‚
# â”‚  â”‚  template:                                   â”‚                   â”‚   â”‚
# â”‚  â”‚    metadata:                                 â”‚                   â”‚   â”‚
# â”‚  â”‚      labels:                                 â”‚                   â”‚   â”‚
# â”‚  â”‚        app: postgres  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ MUST MATCH!       â”‚   â”‚
# â”‚  â”‚        tier: database  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” MUST MATCH!       â”‚   â”‚
# â”‚  â”‚        version: "13"  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Extra (OK!)       â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  Step 3: StatefulSet Creates Pods (Sequentially!)                       â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  Pod 1: postgres-0                                               â”‚   â”‚
# â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚   â”‚
# â”‚  â”‚  Hostname: postgres-0                                            â”‚   â”‚
# â”‚  â”‚  DNS: postgres-0.postgres-service.default.svc.cluster.local      â”‚   â”‚
# â”‚  â”‚  IP: 10.244.0.10 (example)                                       â”‚   â”‚
# â”‚  â”‚  Labels:                                                         â”‚   â”‚
# â”‚  â”‚    â”œâ”€ app: postgres                                              â”‚   â”‚
# â”‚  â”‚    â”œâ”€ tier: database                                             â”‚   â”‚
# â”‚  â”‚    â””â”€ version: "13"                                              â”‚   â”‚
# â”‚  â”‚  PVC: data-postgres-0 (10Gi, ReadWriteOnce)                      â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Pod 2: postgres-1                                               â”‚   â”‚
# â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚   â”‚
# â”‚  â”‚  Hostname: postgres-1                                            â”‚   â”‚
# â”‚  â”‚  DNS: postgres-1.postgres-service.default.svc.cluster.local      â”‚   â”‚
# â”‚  â”‚  IP: 10.244.0.11 (example)                                       â”‚   â”‚
# â”‚  â”‚  Labels:                                                         â”‚   â”‚
# â”‚  â”‚    â”œâ”€ app: postgres                                              â”‚   â”‚
# â”‚  â”‚    â”œâ”€ tier: database                                             â”‚   â”‚
# â”‚  â”‚    â””â”€ version: "13"                                              â”‚   â”‚
# â”‚  â”‚  PVC: data-postgres-1 (10Gi, ReadWriteOnce)                      â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Pod 3: postgres-2                                               â”‚   â”‚
# â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚   â”‚
# â”‚  â”‚  Hostname: postgres-2                                            â”‚   â”‚
# â”‚  â”‚  DNS: postgres-2.postgres-service.default.svc.cluster.local      â”‚   â”‚
# â”‚  â”‚  IP: 10.244.0.12 (example)                                       â”‚   â”‚
# â”‚  â”‚  Labels:                                                         â”‚   â”‚
# â”‚  â”‚    â”œâ”€ app: postgres                                              â”‚   â”‚
# â”‚  â”‚    â”œâ”€ tier: database                                             â”‚   â”‚
# â”‚  â”‚    â””â”€ version: "13"                                              â”‚   â”‚
# â”‚  â”‚  PVC: data-postgres-2 (10Gi, ReadWriteOnce)                      â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  Step 4: Headless Service Provides DNS                                  â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚
# â”‚  Service selector: { app: postgres, tier: database }                    â”‚
# â”‚  Finds all 3 pods âœ“ (they all have these labels)                        â”‚
# â”‚                                                                         â”‚
# â”‚  DNS Resolution:                                                        â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
# â”‚  Query: postgres-service                                                â”‚
# â”‚  Returns: [10.244.0.10, 10.244.0.11, 10.244.0.12]  â—„â”€ All pod IPs      â”‚
# â”‚                                                                         â”‚
# â”‚  Query: postgres-0.postgres-service                                     â”‚
# â”‚  Returns: 10.244.0.10  â—„â”€ Specific pod IP (stable!)                    â”‚
# â”‚                                                                         â”‚
# â”‚  Query: postgres-1.postgres-service                                     â”‚
# â”‚  Returns: 10.244.0.11  â—„â”€ Specific pod IP (stable!)                    â”‚
# â”‚                                                                         â”‚
# â”‚  Query: postgres-2.postgres-service                                     â”‚
# â”‚  Returns: 10.244.0.12  â—„â”€ Specific pod IP (stable!)                    â”‚
# â”‚                                                                         â”‚
# â”‚  Step 5: Client Access                                                  â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
# â”‚  # Connect to specific pod (e.g., primary database)                     â”‚
# â”‚  psql -h postgres-0.postgres-service -p 5432                            â”‚
# â”‚                                                                         â”‚
# â”‚  # Connect to any pod (client-side load balancing)                      â”‚
# â”‚  psql -h postgres-service -p 5432                                       â”‚
# â”‚                                                                         â”‚
# â”‚  KEY DIFFERENCES FROM REGULAR SERVICE:                                  â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
# â”‚  Regular Service:                                                       â”‚
# â”‚  â”œâ”€ Has ClusterIP                                                       â”‚
# â”‚  â”œâ”€ Load balances traffic                                               â”‚
# â”‚  â””â”€ DNS returns service IP                                              â”‚
# â”‚                                                                         â”‚
# â”‚  Headless Service:                                                      â”‚
# â”‚  â”œâ”€ No ClusterIP (clusterIP: None)                                      â”‚
# â”‚  â”œâ”€ No load balancing                                                   â”‚
# â”‚  â”œâ”€ DNS returns all pod IPs                                             â”‚
# â”‚  â””â”€ Enables direct pod access via DNS                                   â”‚
# â”‚                                                                         â”‚
# â”‚  kubectl get pods -l app=postgres,tier=database                         â”‚
# â”‚  NAME          READY   STATUS    RESTARTS   AGE                         â”‚
# â”‚  postgres-0   1/1     Running   0          10m                          â”‚
# â”‚  postgres-1   1/1     Running   0          9m                           â”‚
# â”‚  postgres-2   1/1     Running   0          8m                           â”‚
# â”‚                                                                         â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                   9. ADVANCED SELECTOR TYPES                              â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   EQUALITY-BASED SELECTORS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Used in: Services, kubectl commands
#   Format: key=value or key!=value
#
#   Examples:
#   kubectl get pods -l app=nginx
#   kubectl get pods -l app=nginx,tier=frontend
#   kubectl get pods -l app!=apache
#
#
#   SET-BASED SELECTORS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Used in: Deployments, StatefulSets, ReplicaSets (matchExpressions)
#   Operators: In, NotIn, Exists, DoesNotExist
#
#   Examples:
#   matchExpressions:
#   - key: environment
#     operator: In
#     values: [production, staging]
#
#   - key: tier
#     operator: NotIn
#     values: [deprecated]
#
#   - key: version
#     operator: Exists
#
#   - key: legacy
#     operator: DoesNotExist
#

---
# Example 10: Deployment with Complex Selector
apiVersion: apps/v1
kind: Deployment
metadata:
  name: complex-deployment

spec:
  replicas: 3

  selector:
    # Combine matchLabels and matchExpressions
    matchLabels:
      app: myapp

    matchExpressions:
      # Match pods where environment is production OR staging
      - key: environment
        operator: In
        values:
          - production
          - staging

      # Match pods where tier is NOT deprecated
      - key: tier
        operator: NotIn
        values:
          - deprecated
          - legacy

      # Match pods that have a version label (any value)
      - key: version
        operator: Exists

      # Match pods that DON'T have a canary label
      - key: canary
        operator: DoesNotExist

  template:
    metadata:
      labels:
        app: myapp
        environment: production
        tier: frontend
        version: "2.0"
        # No canary label

    spec:
      containers:
        - name: myapp
          image: myapp:2.0
          ports:
            - containerPort: 8080
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
            limits:
              cpu: 500m
              memory: 256Mi

# This selector matches pods that have:
# âœ“ app: myapp (exact match)
# âœ“ environment: production OR staging
# âœ“ tier: anything except deprecated or legacy
# âœ“ version: any value (label must exist)
# âœ“ canary: must NOT exist

#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                     10. LABEL BEST PRACTICES                              â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   RECOMMENDED LABELS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   Essential labels (always include):
#   â”œâ”€ app: <application-name>           # What application
#   â”œâ”€ environment: <env>                # Which environment (prod, staging, dev)
#   â””â”€ version: <version>                # Application version
#
#   Additional useful labels:
#   â”œâ”€ tier: <tier>                      # Application tier (frontend, backend, database)
#   â”œâ”€ component: <component>            # Component name (api, worker, cache)
#   â”œâ”€ team: <team-name>                 # Owning team
#   â”œâ”€ cost-center: <cost-center>        # For billing/tracking
#   â””â”€ managed-by: <tool>                # Management tool (helm, kubectl, terraform)
#
#
#   KUBERNETES RECOMMENDED LABELS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Use these for better compatibility with tools:
#
#   app.kubernetes.io/name: <app-name>
#   app.kubernetes.io/instance: <instance-name>
#   app.kubernetes.io/version: <version>
#   app.kubernetes.io/component: <component>
#   app.kubernetes.io/part-of: <app-group>
#   app.kubernetes.io/managed-by: <tool>
#
#
#   BEST PRACTICES:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   âœ“ DO:
#   â”œâ”€ Use consistent label names across all resources
#   â”œâ”€ Use lowercase for label keys and values
#   â”œâ”€ Use hyphens for multi-word labels (tier: api-gateway)
#   â”œâ”€ Keep label values short and simple
#   â”œâ”€ Use meaningful, descriptive names
#   â”œâ”€ Document your labeling strategy
#   â””â”€ Use the same labels in selector and template
#
#   âœ— DON'T:
#   â”œâ”€ Don't use labels for non-identifying information (use annotations)
#   â”œâ”€ Don't use spaces in label keys or values
#   â”œâ”€ Don't use special characters (except hyphen, dot, underscore)
#   â”œâ”€ Don't make labels too long (63 char limit)
#   â”œâ”€ Don't change labels on running pods (recreate instead)
#   â””â”€ Don't use too many labels (keep it simple)
#
#
#   LABELS vs ANNOTATIONS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   Use LABELS for:
#   â”œâ”€ Identifying resources
#   â”œâ”€ Selecting resources
#   â”œâ”€ Grouping resources
#   â””â”€ Organizing resources
#
#   Use ANNOTATIONS for:
#   â”œâ”€ Non-identifying metadata
#   â”œâ”€ Tool-specific information
#   â”œâ”€ Build/release information
#   â”œâ”€ Contact information
#   â””â”€ Descriptions and notes
#
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                     11. PRACTICAL EXAMPLES                                â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   SCENARIO: E-commerce Application
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Multiple components, multiple environments
#

---
# Frontend Deployment
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend
  labels:
    app: ecommerce
    component: frontend

spec:
  replicas: 3
  selector:
    matchLabels:
      app: ecommerce
      component: frontend
      environment: production

  template:
    metadata:
      labels:
        app: ecommerce
        component: frontend
        environment: production
        tier: web
        version: "2.1.0"
        team: frontend-team
    spec:
      containers:
        - name: frontend
          image: ecommerce-frontend:2.1.0
          ports:
            - containerPort: 3000
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
            limits:
              cpu: 500m
              memory: 256Mi

---
# Frontend Service
apiVersion: v1
kind: Service
metadata:
  name: frontend-service
  labels:
    app: ecommerce
    component: frontend

spec:
  selector:
    app: ecommerce
    component: frontend
    environment: production

  ports:
    - port: 80
      targetPort: 3000

  type: LoadBalancer

---
# Backend API Deployment
apiVersion: apps/v1
kind: Deployment
metadata:
  name: backend-api
  labels:
    app: ecommerce
    component: api

spec:
  replicas: 5
  selector:
    matchLabels:
      app: ecommerce
      component: api
      environment: production

  template:
    metadata:
      labels:
        app: ecommerce
        component: api
        environment: production
        tier: backend
        version: "3.2.1"
        team: backend-team
    spec:
      containers:
        - name: api
          image: ecommerce-api:3.2.1
          ports:
            - containerPort: 8080
          resources:
            requests:
              cpu: 200m
              memory: 256Mi
            limits:
              cpu: 1000m
              memory: 512Mi

---
# Backend API Service
apiVersion: v1
kind: Service
metadata:
  name: api-service
  labels:
    app: ecommerce
    component: api

spec:
  selector:
    app: ecommerce
    component: api
    environment: production

  ports:
    - port: 8080
      targetPort: 8080

---
# Database StatefulSet
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: database
  labels:
    app: ecommerce
    component: database

spec:
  serviceName: database-service
  replicas: 3

  selector:
    matchLabels:
      app: ecommerce
      component: database
      environment: production

  template:
    metadata:
      labels:
        app: ecommerce
        component: database
        environment: production
        tier: data
        version: "14.5"
        team: platform-team
    spec:
      containers:
        - name: postgres
          image: postgres:14.5
          ports:
            - containerPort: 5432
          resources:
            requests:
              cpu: 250m
              memory: 512Mi
            limits:
              cpu: 1000m
              memory: 1Gi

---
# Database Headless Service
apiVersion: v1
kind: Service
metadata:
  name: database-service
  labels:
    app: ecommerce
    component: database

spec:
  clusterIP: None
  selector:
    app: ecommerce
    component: database
    environment: production

  ports:
    - port: 5432
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  COMPLETE E-COMMERCE APPLICATION ARCHITECTURE                           â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚                                                                         â”‚
# â”‚  This diagram shows how all components work together using labels!      â”‚
# â”‚                                                                         â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  FRONTEND TIER                                                   â”‚   â”‚
# â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Service: frontend-service (LoadBalancer)                        â”‚   â”‚
# â”‚  â”‚  selector: { app: ecommerce, component: frontend, env: prod }    â”‚   â”‚
# â”‚  â”‚  â”œâ”€ Port: 80 â†’ 3000                                              â”‚   â”‚
# â”‚  â”‚  â””â”€ External IP: 34.123.45.67                                    â”‚   â”‚
# â”‚  â”‚                â”‚                                                 â”‚   â”‚
# â”‚  â”‚                â–¼ Routes traffic to                               â”‚   â”‚
# â”‚  â”‚  Deployment: frontend (3 replicas)                               â”‚   â”‚
# â”‚  â”‚  selector: { app: ecommerce, component: frontend, env: prod }    â”‚   â”‚
# â”‚  â”‚  template.labels: { app: ecommerce, component: frontend,         â”‚   â”‚
# â”‚  â”‚                     environment: production, tier: web,          â”‚   â”‚
# â”‚  â”‚                     version: "2.1.0", team: frontend-team }      â”‚   â”‚
# â”‚  â”‚                â”‚                                                 â”‚   â”‚
# â”‚  â”‚                â–¼ Creates                                         â”‚   â”‚
# â”‚  â”‚  Pods: frontend-xxx-abc, frontend-xxx-def, frontend-xxx-ghi      â”‚   â”‚
# â”‚  â”‚  All have labels: { app: ecommerce, component: frontend, ... }   â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                â”‚                                        â”‚
# â”‚                                â”‚ Makes API calls to                     â”‚
# â”‚                                â–¼                                        â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  BACKEND TIER                                                    â”‚   â”‚
# â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Service: api-service (ClusterIP)                                â”‚   â”‚
# â”‚  â”‚  selector: { app: ecommerce, component: api, env: prod }         â”‚   â”‚
# â”‚  â”‚  â””â”€ Port: 8080 â†’ 8080                                            â”‚   â”‚
# â”‚  â”‚                â”‚                                                 â”‚   â”‚
# â”‚  â”‚                â–¼ Routes traffic to                               â”‚   â”‚
# â”‚  â”‚  Deployment: backend-api (5 replicas)                            â”‚   â”‚
# â”‚  â”‚  selector: { app: ecommerce, component: api, env: prod }         â”‚   â”‚
# â”‚  â”‚  template.labels: { app: ecommerce, component: api,              â”‚   â”‚
# â”‚  â”‚                     environment: production, tier: backend,      â”‚   â”‚
# â”‚  â”‚                     version: "3.2.1", team: backend-team }       â”‚   â”‚
# â”‚  â”‚                â”‚                                                 â”‚   â”‚
# â”‚  â”‚                â–¼ Creates                                         â”‚   â”‚
# â”‚  â”‚  Pods: backend-api-xxx-abc, backend-api-xxx-def, ... (5 pods)    â”‚   â”‚
# â”‚  â”‚  All have labels: { app: ecommerce, component: api, ... }        â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                â”‚                                        â”‚
# â”‚                                â”‚ Connects to database                   â”‚
# â”‚                                â–¼                                        â”‚
# â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
# â”‚  â”‚  DATABASE TIER                                                   â”‚   â”‚
# â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â”‚  Service: database-service (Headless)                            â”‚   â”‚
# â”‚  â”‚  selector: { app: ecommerce, component: database, env: prod }    â”‚   â”‚
# â”‚  â”‚  â”œâ”€ clusterIP: None                                              â”‚   â”‚
# â”‚  â”‚  â””â”€ Port: 5432                                                   â”‚   â”‚
# â”‚  â”‚                â”‚                                                 â”‚   â”‚
# â”‚  â”‚                â–¼ Provides DNS for                                â”‚   â”‚
# â”‚  â”‚  StatefulSet: database (3 replicas)                              â”‚   â”‚
# â”‚  â”‚  selector: { app: ecommerce, component: database, env: prod }    â”‚   â”‚
# â”‚  â”‚  template.labels: { app: ecommerce, component: database,         â”‚   â”‚
# â”‚  â”‚                     environment: production, tier: data,         â”‚   â”‚
# â”‚  â”‚                     version: "14.5", team: platform-team }       â”‚   â”‚
# â”‚  â”‚                â”‚                                                 â”‚   â”‚
# â”‚  â”‚                â–¼ Creates (sequentially)                          â”‚   â”‚
# â”‚  â”‚  Pods: database-0, database-1, database-2                        â”‚   â”‚
# â”‚  â”‚  â”œâ”€ database-0.database-service (Primary)                        â”‚   â”‚
# â”‚  â”‚  â”œâ”€ database-1.database-service (Replica)                        â”‚   â”‚
# â”‚  â”‚  â””â”€ database-2.database-service (Replica)                        â”‚   â”‚
# â”‚  â”‚  All have labels: { app: ecommerce, component: database, ... }   â”‚   â”‚
# â”‚  â”‚                                                                  â”‚   â”‚
# â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
# â”‚                                                                         â”‚
# â”‚  TRAFFIC FLOW:                                                          â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
# â”‚  User â†’ frontend-service:80 â†’ frontend pods:3000                        â”‚
# â”‚         frontend pods â†’ api-service:8080 â†’ backend-api pods:8080        â”‚
# â”‚                         backend-api pods â†’ database-0.database-svc:5432 â”‚
# â”‚                                                                         â”‚
# â”‚  LABEL-BASED QUERIES:                                                   â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
# â”‚  # Get all ecommerce resources                                          â”‚
# â”‚  kubectl get all -l app=ecommerce                                       â”‚
# â”‚  â†’ Returns: 3 deployments, 1 statefulset, 3 services, 11 pods           â”‚
# â”‚                                                                         â”‚
# â”‚  # Get only frontend resources                                          â”‚
# â”‚  kubectl get all -l app=ecommerce,component=frontend                    â”‚
# â”‚  â†’ Returns: 1 deployment, 1 service, 3 pods                             â”‚
# â”‚                                                                         â”‚
# â”‚  # Get all production resources                                         â”‚
# â”‚  kubectl get all -l environment=production                              â”‚
# â”‚  â†’ Returns: All resources (all are in production)                       â”‚
# â”‚                                                                         â”‚
# â”‚  # Get all backend tier resources                                       â”‚
# â”‚  kubectl get all -l tier=backend                                        â”‚
# â”‚  â†’ Returns: 1 deployment, 1 service, 5 pods (backend-api)               â”‚
# â”‚                                                                         â”‚
# â”‚  # Get resources managed by specific team                               â”‚
# â”‚  kubectl get all -l team=backend-team                                   â”‚
# â”‚  â†’ Returns: 1 deployment, 5 pods (backend-api)                          â”‚
# â”‚                                                                         â”‚
# â”‚  SCALING EXAMPLE:                                                       â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
# â”‚  kubectl scale deployment frontend --replicas=5                         â”‚
# â”‚  1. Deployment creates 2 more pods                                      â”‚
# â”‚  2. New pods get labels: { app: ecommerce, component: frontend, ... }   â”‚
# â”‚  3. Service automatically discovers new pods (via selector)              â”‚
# â”‚  4. Traffic now distributed across 5 frontend pods                      â”‚
# â”‚                                                                         â”‚
# â”‚  UPDATE EXAMPLE:                                                        â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
# â”‚  kubectl set image deployment/backend-api api=ecommerce-api:3.3.0       â”‚
# â”‚  1. Deployment creates new ReplicaSet with new pod-template-hash        â”‚
# â”‚  2. New pods get labels: { ..., version: "3.3.0", pod-...: new-hash }   â”‚
# â”‚  3. Service selector still matches (doesn't care about version label)   â”‚
# â”‚  4. Rolling update: old pods terminated, new pods created               â”‚
# â”‚                                                                         â”‚
# â”‚  KEY INSIGHTS:                                                          â”‚
# â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
# â”‚  âœ“ Common label (app: ecommerce) groups all components                  â”‚
# â”‚  âœ“ Component label (frontend, api, database) separates tiers            â”‚
# â”‚  âœ“ Environment label (production) enables env-specific queries          â”‚
# â”‚  âœ“ Tier label (web, backend, data) shows architectural layer            â”‚
# â”‚  âœ“ Version label enables version tracking (not used in selectors)       â”‚
# â”‚  âœ“ Team label enables ownership tracking                                â”‚
# â”‚  âœ“ Services use selectors to find pods dynamically                      â”‚
# â”‚  âœ“ Labels enable powerful querying and organization                     â”‚
# â”‚                                                                         â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
# QUERYING RESOURCES:
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
# Get all ecommerce resources:
# kubectl get all -l app=ecommerce
#
# Get only frontend resources:
# kubectl get all -l app=ecommerce,component=frontend
#
# Get all production resources:
# kubectl get all -l environment=production
#
# Get all backend tier resources:
# kubectl get all -l tier=backend
#
# Get resources managed by specific team:
# kubectl get all -l team=backend-team
#
# Get all resources except frontend:
# kubectl get all -l 'component!=frontend'
#

#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                    12. TESTING AND DEBUGGING                              â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   VIEWING LABELS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   # Show labels for all pods
#   kubectl get pods --show-labels
#
#   # Show labels for specific resource
#   kubectl get deployment nginx-deployment --show-labels
#
#   # Show labels in columns
#   kubectl get pods -L app,environment,tier
#
#
#   FILTERING BY LABELS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   # Single label
#   kubectl get pods -l app=nginx
#
#   # Multiple labels (AND)
#   kubectl get pods -l app=nginx,tier=frontend
#
#   # Not equal
#   kubectl get pods -l app!=nginx
#
#   # Set-based (In)
#   kubectl get pods -l 'environment in (production,staging)'
#
#   # Set-based (NotIn)
#   kubectl get pods -l 'tier notin (deprecated,legacy)'
#
#   # Label exists
#   kubectl get pods -l version
#
#   # Label doesn't exist
#   kubectl get pods -l '!canary'
#
#
#   ADDING/REMOVING LABELS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   # Add label to pod
#   kubectl label pod nginx-pod new-label=value
#
#   # Update existing label
#   kubectl label pod nginx-pod app=apache --overwrite
#
#   # Remove label
#   kubectl label pod nginx-pod version-
#
#   # Add label to all pods matching selector
#   kubectl label pods -l app=nginx environment=production
#
#
#   CHECKING SERVICE ENDPOINTS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   # View which pods a service selected
#   kubectl get endpoints nginx-service
#
#   # Describe service to see selector and endpoints
#   kubectl describe service nginx-service
#
#   # Check if service has endpoints
#   kubectl get endpoints nginx-service -o jsonpath='{.subsets[*].addresses[*].ip}'
#
#
#   DEBUGGING LABEL MISMATCHES:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   Problem: Service has no endpoints
#
#   Step 1: Check service selector
#   kubectl get service nginx-service -o yaml | grep -A 5 selector
#
#   Step 2: Check pod labels
#   kubectl get pods --show-labels
#
#   Step 3: Check if any pods match
#   kubectl get pods -l app=nginx,tier=frontend
#
#   Step 4: Check endpoints
#   kubectl get endpoints nginx-service
#
#   If no endpoints:
#   â”œâ”€ Verify selector labels match pod labels exactly
#   â”œâ”€ Check for typos in label names or values
#   â”œâ”€ Verify pods are in Running state
#   â””â”€ Check if pods are in the same namespace
#
#
#   COMMON ISSUES:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   Issue 1: Service has no endpoints
#   â””â”€ Solution: Verify selector matches pod labels
#
#   Issue 2: Deployment not managing pods
#   â””â”€ Solution: Verify selector.matchLabels matches template.metadata.labels
#
#   Issue 3: Pods not showing up in kubectl get
#   â””â”€ Solution: Check label selector syntax
#
#   Issue 4: StatefulSet pods not getting DNS
#   â””â”€ Solution: Verify headless service selector matches pod labels
#
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                           QUICK REFERENCE                                 â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   LABEL SYNTAX:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   metadata:
#     labels:
#       key: value
#
#   SELECTOR SYNTAX (Service):
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   spec:
#     selector:
#       key: value
#
#   SELECTOR SYNTAX (Deployment):
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   spec:
#     selector:
#       matchLabels:
#         key: value
#       matchExpressions:
#       - key: environment
#         operator: In
#         values: [prod, staging]
#
#   KUBECTL COMMANDS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   kubectl get pods --show-labels
#   kubectl get pods -l key=value
#   kubectl label pod <name> key=value
#   kubectl get endpoints <service-name>
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                           SUMMARY                                         â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
#   KEY TAKEAWAYS:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#   1. Labels are key-value pairs that identify and organize resources
#   2. Selectors are queries that find resources with matching labels
#   3. Services use selectors to find pods to route traffic to
#   4. Deployments/StatefulSets use selectors to find pods to manage
#   5. Selector labels MUST match pod template labels
#   6. Pods can have extra labels beyond what selector requires
#   7. Use consistent labeling strategy across all resources
#   8. Test label matching with kubectl get pods -l <selector>
#
#   ğŸ’¡ REMEMBER:
#   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#   Labels connect everything in Kubernetes!
#   Service â†’ Selector â†’ Labels â†’ Pods
#   Deployment â†’ Selector â†’ Labels â†’ Pods
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                           RELATED FILES                                   â•‘
# â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
# â•‘  â€¢ service-loadbalancer.yaml  - Service with selectors                   â•‘
# â•‘  â€¢ deployment.yaml            - Deployment with selectors                â•‘
# â•‘  â€¢ statefulset-simple.yaml    - StatefulSet with selectors               â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
